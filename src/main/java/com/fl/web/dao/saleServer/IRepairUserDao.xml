<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.fl.web.dao.saleServer.IRepairUserDao">

    <resultMap type="TRepairUser" id="reUserMap">
        <result property="id" column="id"/>
        <result property="userName" column="username"/>
        <result property="realName" column="realname"/>
        <result property="telphone" column="telphone"/>
        <result property="empCode" column="emp_code"/>
        <result property="note" column="note"/>
        <result property="status" column="status"/>
        <result property="createBy" column="create_by"/>
        <result property="createDate" column="create_date"/>
        <result property="updateBy" column="update_by"/>
        <result property="updateDate" column="update_date"/>
    </resultMap>

    <select id="queryRepairUserList" resultMap="reUserMap" parameterType="RepairUser">
        SELECT
        t.id,
        t.username,
        t.realname,
        t.telphone,
        u.emp_code,
        t.note
        FROM
        repair_user t left join t_user_info u on t.username=u.username
        WHERE
        t.status != '003'
        <if test="userName != null">
            and t.username like #{userName}
        </if>
        <if test="realName != null">
            and t.realname like #{realName}
        </if>
    </select>


    <insert id="saveRepairUser" parameterType="TRepairUser">
        insert into repair_user (id,username,realname,telphone,note,create_by,create_date,status)
        values (#{id}, #{userName},#{realName},#{telphone},#{note},#{createBy},#{createDate},#{status})
    </insert>

    <update id="deleteRepairUser" parameterType="java.util.Map">
        update repair_user set status=#{status}, update_by = #{updateBy},update_date = #{updateDate}
        where id in
        <foreach collection="idList" item="id" index="index" open="(" close=")" separator=",">
            #{id}
        </foreach>
    </update>

</mapper>